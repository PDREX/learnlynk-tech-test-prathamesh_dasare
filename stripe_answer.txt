To implement Stripe Checkout for an application fee, I would first create a payment_requests row in our database that stores the application_id, fee amount, user_id, and an initial status like "pending". After that, the backend (Edge Function or API route) would call Stripe’s API to create a Checkout Session, passing the payment_request.id as metadata so we can identify it later. I would store the stripe_session_id and stripe_checkout_url back into the payment_requests table so the frontend can redirect the user to Checkout.

Next, I would configure a Stripe webhook endpoint to listen for events such as checkout.session.completed. When Stripe confirms the payment, the webhook will look up the payment_request using the session metadata and update its status to "paid". At the same time, I would update the related application record — either advancing its stage (e.g., from “submitted” → “processing”) or appending a timeline entry that logs the successful payment. This ensures the system stays in sync with Stripe and the application flow continues automatically even if the user closes the browser.